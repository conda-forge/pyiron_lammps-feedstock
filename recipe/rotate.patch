From 0cff5cedd259c4509f79750f4bfc4e61fd93daa7 Mon Sep 17 00:00:00 2001
From: Achraf Atila <achraf.atila@gmail.com>
Date: Sun, 25 Jan 2026 11:10:13 +0100
Subject: [PATCH] Update calculate.py (#302)

* Update calculate.py

* Update calculate.py
---
 src/pyiron_lammps/compatibility/calculate.py | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/pyiron_lammps/compatibility/calculate.py b/src/pyiron_lammps/compatibility/calculate.py
index c77d562..80574a5 100644
--- a/src/pyiron_lammps/compatibility/calculate.py
+++ b/src/pyiron_lammps/compatibility/calculate.py
@@ -385,6 +385,10 @@ def _pressure_to_lammps(pressure, rotation_matrix, units="metal"):
         (float): a single, isotropic pressure to be used with the "iso" option
     """
 
+    # in case no rotation matrix is given, assume identity
+    if rotation_matrix is None:
+        rotation_matrix = np.eye(3)
+
     # If pressure is a scalar, only unit conversion is needed.
     if np.isscalar(pressure):
         return float(pressure) * LAMMPS_UNIT_CONVERSIONS[units]["pressure"]
